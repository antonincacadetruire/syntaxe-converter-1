# Syntaxe Converter

Syntaxe Converter is a powerful CLI tool designed to convert grammars between popular formats: TreeSitter, ANTLR, BNFC, BISON/FLEX, ASDL, and EBNF.

The tool first parses the source syntax into a universal unique language, then generates the equivalent grammar in the chosen target format. This approach ensures reliable, structured, and extensible conversion between different grammar ecosystems.

## Table of Contents
- [**Installation**](#installation-â¬‡ï¸)
- [**Usage**](#usage-ğŸ“)
- [**Important**](#important-âš ï¸)
- [**Tests**](#tests-ğŸ‘·ğŸ»)
- [**Progression**](#progression-ğŸ“ˆ)

## Installation â¬‡ï¸

Make sure you have OCaml, Dune, and Menhir installed on your system, as well as Node.js and antlr4

```bash
opam install dune menhir
npm i
```

## Usage ğŸ“

Build the project with Dune:

```bash
dune build
```

Run the tool (with CLI options):

```bash
dune exec ./src/main.exe -- --from <source_format> --to <target_format> <input_file> <output_file>
```

Replace `<source_format>`, `<target_format>`, `<input_file>`, and `<output_file>` with your desired formats and file paths.

Example:

```bash
dune exec ./src/main.exe -- --from ebnf --to antlr input.ebnf output.g4
```

To run some test on the grammar you can use :
```bash
antlr4-parse Java8Lexer.g4 Java8Parser.g4 [files.g4, ...] functionStartEOF [compilationUnit] -gui [-tree, -gui]
```

## Important âš ï¸

The "options" in antlr files `.g4` should be removed, and the file that is refered to should be copy passed in, and the 
```antlr
parser grammar MyGrammar
```
sould be changed to 
```antlr
grammar MyGrammar
```

##  Tests ğŸ‘·ğŸ»
```bash
dune exec syntaxe_converter tests/Java8Parser.g4 output.g4
# or
dune exec syntaxe_converter tests/grammar-Java.js output.js
```

## Progression ğŸ“ˆ

### July 3rd ğŸ“…
The parsing part for `ANTLR`and `Tree-sitter` is done.
There isn't a complete implementation of a traduction from the GrammarTS object to a grammar.js file for now.
There is a translation logic to implement between **Grammar** (`ANTLR`) and **GrammarTS** (`Tree-sitter`)

### Objectives ğŸ¯
The first objective is to translate from `ANTLR` to `Tree-sitter`. The idea is to avoid having to use this huge trees that are being generated by `ANTLR`.
A simplification of `ANTLR` grammar is still possible, as seen below in examples. The simplification is to **flatten** the trees generated by `ANTLR` so that reading them become easy.  
- Original tree generated with this grammar :
![Huge tree](tests/antlr4_parse_tree.png)
- New tree generated with the simplified grammar :
![Less huge Tree](tests/antlr4_parse_tree_Modified.png)
The reason why we still want to use `ANTLR` is because of how many grammars and language supports exist for this tool.

### TODO list ğŸ› ï¸
- [x] Parsing `ANTLR`
- [x] Storing an `ANTLR` grammar into an `OCAML` object (`ANTLR` grammar object)
- [x] Using an `OCAML` obect to generate a grammar in `ANTLR`
- [x] Parsing `Tree-sitter`
- [x] Storing an `Tree-sitter` grammar into an `OCAML` object (`Tree-sitter` grammar object)
- [ ] Using an `OCAML` obect to generate a grammar in `Tree-sitter`
- [ ] Translating an `ANTLR` grammar object into a `Tree-sitter` grammar object